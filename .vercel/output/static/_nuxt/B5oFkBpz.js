import{r as b,k as $,c as v,o as p,a as e,h as U,d as i,i as P,v as z,l as B,F as R,f as D,t as s,g as F,m as A,p as E}from"./DoWHJ2FZ.js";import{u as O}from"./BCqbGBHg.js";const j={paper_sticker:45,polylaser:150,muflon:80,silver_film:650},q={glossy:30,matte:30,soft_touch:70},G=[{to:10,price:80},{to:50,price:60},{to:100,price:55},{to:200,price:50},{to:300,price:47},{to:400,price:45},{to:500,price:42},{to:750,price:40},{to:1e3,price:37},{to:2e3,price:35},{to:4e3,price:32},{to:999999,price:30}],H=[{to:10,price:60},{to:24,price:80},{to:49,price:100},{to:85,price:150},{to:104,price:200},{to:150,price:250},{to:250,price:300},{to:999999,price:400}],I={width:405,height:290,margin:3},c={materials:j,lamination:q,print_price:G,cutting_price:H,sheet:I};function J(){const S=O();return{addProduct:({title:g,options:d,price:a})=>{S.addToCart({title:g,options:d,price:a}),alert("Товар добавлен в корзину!")}}}const Q={class:"max-w-2xl mx-auto p-6 space-y-6"},X={class:"space-y-4"},Y={class:"block"},Z={class:"block"},tt={class:"block"},et=["value"],ot={class:"block"},lt={class:"flex items-center gap-2 mb-1"},st={key:0},nt={class:"block"},it=["value"],at={key:0,class:"text-orange-600 italic text-sm mt-2"},rt={class:"border-t pt-6"},ut={class:"space-y-1"},ct={class:"text-lg font-bold mt-2"},dt={class:"text-green-600"},pt={__name:"RoundStickersCalculator",setup(S){const k=c.print_price,g=c.cutting_price,d=c.sheet,a=b(1e3),f=b(50),h=b("paper_sticker"),x=b("soft_touch"),m=b(!0),y=b(""),{addProduct:K}=J(),w=(n,t)=>{var o;return((o=n.find(l=>t<=l.to))==null?void 0:o.price)??n.at(-1).price},r=$(()=>{const n=Number(f.value)+d.margin*2,t=Math.floor(d.width/n),o=Math.floor(d.height/n),l=t*o;if(!l||l===0)return{total:0};const u=Math.ceil(a.value/l),M=c.materials[h.value],_=m.value?c.lamination[x.value]:0,C=w(k,u)+M+_,N=u*C,T=w(g,l),V=T*u;return{itemsPerSheet:l,sheetsNeeded:u,unitPrice:C,subtotal:N,cuttingUnitPrice:T,cuttingTotal:V,total:N+V}}),L=()=>{y.value="";let n=a.value;const t=Number(f.value)+d.margin*2,o=Math.floor(d.width/t),l=Math.floor(d.height/t),u=o*l;if(!u||u===0)return;let M=0;for(;;){const _=Math.ceil(n/u),C=c.materials[h.value],N=m.value?c.lamination[x.value]:0,T=w(k,_)+C+N,V=_*T,W=w(g,u)*_;if(M=V+W,M>=2e3||n>1e5)break;n++}n!==a.value&&(y.value=`Тираж был увеличен до ${n} для соблюдения минимальной суммы заказа в 2000 ₽.`,a.value=n),K({title:"Круглые наклейки",options:{тираж:a.value,диаметр:f.value,материал:h.value,ламинация:m.value?x.value:"без ламинации"},price:r.value.total})};return(n,t)=>(p(),v("div",Q,[t[15]||(t[15]=e("h1",{class:"text-2xl font-bold"},"Калькулятор круглых наклеек",-1)),e("div",X,[e("label",Y,[t[5]||(t[5]=i(" Тираж: ")),P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o),type:"number",min:"1",class:"mt-1 border px-2 py-1 w-full"},null,512),[[z,a.value,void 0,{number:!0}]])]),e("label",Z,[t[6]||(t[6]=i(" Диаметр (мм): ")),P(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>f.value=o),type:"number",min:"1",class:"mt-1 border px-2 py-1 w-full"},null,512),[[z,f.value,void 0,{number:!0}]])]),e("label",tt,[t[7]||(t[7]=i(" Материал: ")),P(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>h.value=o),class:"mt-1 border px-2 py-1 w-full"},[(p(!0),v(R,null,D(F(c).materials,(o,l)=>(p(),v("option",{value:l,key:l},s(l)+" — "+s(o)+"₽ ",9,et))),128))],512),[[B,h.value]])]),e("div",ot,[e("label",lt,[P(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=o=>m.value=o)},null,512),[[A,m.value]]),t[8]||(t[8]=i(" Добавить ламинацию "))]),m.value?(p(),v("div",st,[e("label",nt,[t[9]||(t[9]=i(" Тип ламинации: ")),P(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>x.value=o),class:"mt-1 border px-2 py-1 w-full"},[(p(!0),v(R,null,D(F(c).lamination,(o,l)=>(p(),v("option",{value:l,key:l},s(l)+" — "+s(o)+"₽ ",9,it))),128))],512),[[B,x.value]])])])):U("",!0)])]),y.value?(p(),v("div",at,s(y.value),1)):U("",!0),e("div",rt,[t[14]||(t[14]=e("h2",{class:"text-xl font-semibold mb-2"},"Расчёт:",-1)),e("ul",ut,[e("li",null,[t[10]||(t[10]=i(" Изделий на листе: ")),e("strong",null,s(r.value.itemsPerSheet),1)]),e("li",null,[t[11]||(t[11]=i(" Необходимо листов: ")),e("strong",null,s(r.value.sheetsNeeded),1)]),e("li",null,[i(" Стоимость за лист (печать + материал"+s(m.value?" + ламинация":"")+"): ",1),e("strong",null,s(r.value.unitPrice)+"₽",1)]),e("li",null,[t[12]||(t[12]=i(" Сумма за печать и материалы: ")),e("strong",null,s(r.value.subtotal)+"₽",1)]),e("li",null,[i(" Резка: "+s(r.value.cuttingUnitPrice)+"₽ × "+s(r.value.sheetsNeeded)+" = ",1),e("strong",null,s(r.value.cuttingTotal)+"₽",1)]),e("li",ct,[t[13]||(t[13]=i(" Итого: ")),e("span",dt,s(r.value.total)+"₽",1)])])]),e("button",{onClick:L,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow mt-4"}," Заказать ")]))}},bt={__name:"stickers",setup(S){return(k,g)=>(p(),E(pt))}};export{bt as default};
